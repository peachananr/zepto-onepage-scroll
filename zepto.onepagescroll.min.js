!function(a){a.extend(a.fn,{onePageScroll:function(b){function c(a,b){var c=b;0>c?h.moveDown():h.moveUp()}function d(b){if(!a(b.target).hasClass("disabled-scroll")){b.preventDefault();var d=b.wheelDelta||-b.detail;if(Math.abs(b.wheelDelta)<g.threshold)return;o.hasClass("disabled-onepage-scroll")||c(b,d)}}function e(a){var b=a.target.tagName.toLowerCase();if(!o.hasClass("disabled-onepage-scroll"))switch(a.which){case 38:"input"!=b&&"textarea"!=b&&h.moveUp();break;case 40:"input"!=b&&"textarea"!=b&&h.moveDown();break;default:return}return!1}var f={sectionContainer:"section",easing:"ease",animationTime:1e3,threshold:100,pagination:!0,updateURL:!1,keyboard:!0,beforeMove:null,afterMove:null,loop:!1,responsiveFallback:!1},g=a.extend({},f,b),h=a(this),i=a(g.sectionContainer),j=i.length,k=0,l=0,l=0,m=300,n="",o=a("body");a.fn.swipeEvents=function(){return this.each(function(){function b(a){var b=a.touches;b&&b.length&&(d=b[0].pageX,e=b[0].pageY,f.on("touchmove",c))}function c(a){var b=a.touches;if(b&&b.length){a.preventDefault();var g=d-b[0].pageX,h=e-b[0].pageY;g>=50&&f.trigger("swipeLeft"),-50>=g&&f.trigger("swipeRight"),h>=50&&f.trigger("swipeUp"),-50>=h&&f.trigger("swipeDown"),(Math.abs(g)>=50||Math.abs(h)>=50)&&f.off("touchmove",c)}}var d,e,f=a(this);f.on("touchstart",b)})},a.fn.transformPage=function(b,c,d,e){var f=a(this);"function"==typeof b.beforeMove&&b.beforeMove(d,e),f.animate({translate3d:"0, "+c+"%, 0"},b.animationTime,b.easing,function(){"function"==typeof b.afterMove&&b.afterMove(d)})},a.fn.moveDown=function(){var b=(new Date).getTime();if(b-l<m+g.animationTime)return void event.preventDefault();var c=a(g.sectionContainer+".active").data("index"),d=a(g.sectionContainer+"[data-index='"+c+"']"),e=a(g.sectionContainer+"[data-index='"+(parseInt(c)+1)+"']"),f=a(this);if(e.length<1){if(1!=g.loop)return;u=0,e=a(g.sectionContainer+"[data-index='1']")}else u=100*c*-1;var h=e.data("index");if(d.removeClass("active"),e.addClass("active"),1==g.pagination&&(a(".onepage-pagination li a[data-index='"+c+"']").removeClass("active"),a(".onepage-pagination li a[data-index='"+h+"']").addClass("active")),document.body.className=document.body.className.replace(/\bviewing-page-\d.*?\b/g,""),o.addClass("viewing-page-"+h),history.replaceState&&1==g.updateURL){var i=window.location.href.substr(0,window.location.href.indexOf("#"))+"#"+(parseInt(c)+1);history.pushState({},document.title,i)}f.transformPage(g,u,h,e),l=b},a.fn.moveUp=function(){var b=(new Date).getTime();if(b-l<m+g.animationTime)return void event.preventDefault();var c=a(g.sectionContainer+".active").data("index"),d=a(g.sectionContainer+"[data-index='"+c+"']"),e=a(g.sectionContainer+"[data-index='"+(parseInt(c)-1)+"']"),f=a(this);if(e.length<1){if(1!=g.loop)return;u=100*(j-1)*-1,e=a(g.sectionContainer+"[data-index='"+j+"']")}else u=100*(e.data("index")-1)*-1;var h=e.data("index");if(d.removeClass("active"),e.addClass("active"),1==g.pagination&&(a(".onepage-pagination li a[data-index='"+c+"']").removeClass("active"),a(".onepage-pagination li a[data-index='"+h+"']").addClass("active")),document.body.className=document.body.className.replace(/\bviewing-page-\d.*?\b/g,""),o.addClass("viewing-page-"+h),history.replaceState&&1==g.updateURL){var i=window.location.href.substr(0,window.location.href.indexOf("#"))+"#"+(parseInt(c)-1);history.pushState({},document.title,i)}f.transformPage(g,u,h,e),l=b},a.fn.moveTo=function(b){var c=(new Date).getTime();if(c-l<m+g.animationTime)return void event.preventDefault();var d=a(g.sectionContainer+".active"),e=a(g.sectionContainer+"[data-index='"+b+"']"),f=a(this);if(e.length>0){var h=e.data("index");if(d.removeClass("active"),e.addClass("active"),a(".onepage-pagination li a.active").removeClass("active"),a(".onepage-pagination li a[data-index='"+b+"']").addClass("active"),document.body.className=document.body.className.replace(/\bviewing-page-\d.*?\b/g,""),o.addClass("viewing-page-"+h),u=100*(b-1)*-1,history.replaceState&&1==g.updateURL){var i=window.location.href.substr(0,window.location.href.indexOf("#"))+"#"+(parseInt(b)-1);history.pushState({},document.title,i)}f.transformPage(g,u,b,e),l=c}};var p=function(){a(document).width()<g.responsiveFallback?(o.addClass("disabled-onepage-scroll"),a(document).off("mousewheel DOMMouseScroll",d),a(document).off("swipeDown swipeUp")):(o.hasClass("disabled-onepage-scroll")&&(bodyremoveClass("disabled-onepage-scroll"),a("html, body, .wrapper").animate({scrollTop:0},"fast")),a(document).swipeEvents().on("swipeDown",function(b){a("body").hasClass("disabled-onepage-scroll")||b.preventDefault(),h.moveUp()}).on("swipeUp",function(b){a("body").hasClass("disabled-onepage-scroll")||b.preventDefault(),h.moveDown()}),a(document).on("mousewheel DOMMouseScroll",d))};if(h.addClass("onepage-wrapper"),h.css("position","relative"),a.each(i,function(b,c){a(this).addClass("ops-section").data("index",b+1),k+=100,1==g.pagination&&(n+="<li><a data-index='"+(b+1)+"' href='#"+(b+1)+"'></a></li>")}),a(document).swipeEvents().on("swipeDown",function(b){a("body").hasClass("disabled-onepage-scroll")||b.preventDefault(),h.moveUp()}).on("swipeUp",function(b){a("body").hasClass("disabled-onepage-scroll")||b.preventDefault(),h.moveDown()}),1==g.pagination&&(a("<ul class='onepage-pagination'>"+n+"</ul>").prependTo("body"),posTop=h.find(".onepage-pagination").height()/2*-1,h.find(".onepage-pagination").css("margin-top",posTop)),""!=window.location.hash&&"#1"!=window.location.hash){var q=window.location.hash.replace("#",""),r=a(g.sectionContainer+"[data-index='"+q+"']"),s=r.data("index");if(a(g.sectionContainer+"[data-index='"+q+"']").addClass("active"),o.addClass("viewing-page-"+q),1==g.pagination&&a(".onepage-pagination li a[data-index='"+q+"']").addClass("active"),r&&(r.addClass("active"),1==g.pagination&&a(".onepage-pagination li a[data-index='"+q+"']").addClass("active"),document.body.className=document.body.className.replace(/\bviewing-page-\d.*?\b/g,""),o.addClass("viewing-page-"+s),history.replaceState&&1==g.updateURL)){var t=window.location.href.substr(0,window.location.href.indexOf("#"))+"#"+q;history.pushState({},document.title,t)}var u=100*(q-1)*-1;h.transformPage(g,u,q)}else a(g.sectionContainer+"[data-index='1']").addClass("active"),o.addClass("viewing-page-1"),1==g.pagination&&a(".onepage-pagination li a[data-index='1']").addClass("active");return 1==g.pagination&&a(".onepage-pagination li a").click(function(){var b=a(this).data("index");h.moveTo(b)}),a(document).on("mousewheel DOMMouseScroll",d),0!=g.responsiveFallback&&(window.onresize=function(){p()},p()),1==g.keyboard&&(document.onkeydown=e),!1}})}(Zepto);